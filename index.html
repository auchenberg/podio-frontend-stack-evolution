<!DOCTYPE html>

<html>
  <head>
    <title>Going client-side</title>

    <meta charset='utf-8'>
    <script src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
  </head>

  <style>
    .slides.template-default > article:not(.nobackground):not(.biglogo) {
      background: white url(https://company.podio.com/images/podiologo_thumb.gif) 730px 600px no-repeat !important;
    }
    
    article ul li ul li {
	  font-size: 18px;
	  line-height: 1.2;
    }
    
    article ul li ul li:first-child {
	  margin-top: 10px;
    }


  </style>

  <body style='display: none'>

    <section class='slides layout-regular template-default'>

      <article>
        <h1>Going client-side</h1>
        <p>
          Podio
          <br>
          December, 2011
        </p>
      </article>

      <article>
        <h2>
          Project ZEUS
        </h2>
        <p>
          <img class="centered" src='zeus.jpg' style="height: 400px;">
        </p>
      </article>

      <article>
        <h3>Agenda</h3>
        <ul>
          <li>The mission</li>
          <li>Requirements</li>
          <li>Going Backbone</li>
          <li>Benchmarks</li>
          <li>Testing</li>
          <li>Going forward</li>
        </ul>
      </article>

      <article>
        <h3>The mission</h3>
        <ul>
          <li>
          	Faster user experience
          	<ul>
          		<li>Decreased loading times</li>
          		<li>Better preceived performance</li>
          	</ul>
          </li>
          <li>
          	Faster development
          	<ul>
          		<li>Reuse of components</li>
          	</ul>
          </li>
          <li>
          	More structure
          	<ul>
          		<li>A truly Component-based architecture</li>
          		<li>Separation of concerns (MVC)</li>
          	</ul>
          </li>
          <li>
          	Less errors
          	<ul>
          		<li>Decouple from the DOM</li>
          		<li>Less events and more routes</li>
          	</ul>
          </li>
          <li>
          	Less regression
          	<ul>
          		<li>Client-side testing</li>
          		<li>Unit and integration tests</li>
          	</ul>
          </li>
        </ul>
      </article>

      <article>
        <h3>Requirements</h3>
        <ul>
          <li>Fits existing code base</li>
          <li>Decouple from DOM</li>
          <li>Provides structure, no lock-in</li>
          <li>Lightweight</li>
        </ul>
      </article>

      <article>
        <h3>Server-side templating</h3>
        <p>
          <img class="centered" src='classic.jpg' style="height: 500px">
        </p>
      </article>

      <article>
        <h3>Client-side templating</h3>
        <p>
          <img class="centered" src='clientside.jpg' style="height: 500px">
        </p>
      </article>

      <article>
        <h2>
          Backbone.JS
        </h2>
        <p>
          <img class="centered" src='backbone.png' style="margin-top: 200px;">
        </p>
      </article>

      <article class='smaller'>
        <h3>
          Backbone.PodioModel
        </h3>
        <section>
        <pre>
Podio.Models.Item = Backbone.PodioModel.extend({

  has_many : {
    'revisions' : 'ItemRevision',
    'files'     : 'Files',
    'comments'  : 'Comments',
    'shares'    : 'AppStoreShares'
  }

});
</pre>
        </section>
      </article>

      <article class='smaller'>
        <h3>
          Backbone.PodioCollection
        </h3>
        <section>
        <pre>
Podio.Collections.Meetings = Backbone.PodioCollection.extend({
    model: Podio.Models.Meeting,
    url: '/backbone'
});
</pre>
        </section>
      </article>

      <article class='smaller'>
        <h3>
          Backbone.PodioPaginatedCollection
        </h3>
        <section>
        <pre>
Podio.Collections.Items = Backbone.PodioPaginatedCollection.extend({
  model: Podio.Models.Item,

  initialize: function(models, options) {
    if (!options || !options.url) {
      throw "The options hash or the url is missing!";
    }
    this.url = options.url;
    this.initPagination(options.currentPage, options.itemsPerPage);
  }
});
</pre>
        </section>
      </article>


      <article class='smaller'>
          <h3>
            Backbone.PodioView
          </h3>
          <section>
          <pre>

Podio.Views.Items.BadgeViewItem = Backbone.PodioView.extend({
  initialize: function() {
    _.bindAll(this, 'render');
  },

  render: function() {
    $(this.el).html(Podio.Templates['items/badge_list/_item']({
      data  : this.model.item.toJSON(),
      model : this.model.item,
      index : this.model.index
     }));

    return this;
  }
});
  </pre>
          </section>
        </article>

      <article class='smaller'>
         <h3>
           Backbone.PodioPaginatedView
         </h3>
         <section>
         <pre>
Podio.Views.Items.BadgeView = Backbone.PodioPaginatedView.extend({
 initialize : function () {
   this.elmPagingNav = $('');
   this.initializePagination();

   ...
 },

 render : function () {

   ....

   this.elmPagingNav = this.elmPagingNav.appendTo(this.el);
 }
});
 </pre>
         </section>
       </article>


      <article class='smaller'>
        <h3>
          Backbone.PodioRouter
        </h3>
        <section>
        <pre>
Podio.Routers.Apps = Backbone.PodioRouter.extend({
  routes : {
    ":pageNum:"  : { action: "index" }
  },

  initialize: function() {
    _.bindAll(this, 'index');
  },

  index : function (routeData, pageNum) {
    if(!pageNum) {
      pageNum = 1;
    }

    if (!this.appView) {
      this.initComponents(pageNum);
    }

    this.itemsCollection.getPage(pageNum);
  }
});

this.router = new Podio.Routers.Apps();
</pre>
        </section>
      </article>

      <article class='smaller'>
        <h3> Example</h3>
        <section>
        <pre>
initComponents: function() {
  var appId = Podio.Apps.appsViewModel.get('application').get('id');

  this.appView = new Podio.Views.Apps.AppView({ model : Podio.Apps.appsViewModel });

  this.itemsCollection = new Podio.Collections.Items([], {
    currentPage: pageNum,
    itemsPerPage: 9,
    url: Podio.Router.getBaseUrl() + Podio.Routes.apps_items_path(Podio.Config.space_url_label, appId, { format: 'json' })
  });

  this.badgeView = new Podio.Views.Items.BadgeView({
    el: $('.app-view-main .items-list'),
    collection: this.itemsCollection
  });

}

</pre>
        </section>
      </article>

      <article class='smaller'>
        <h3>Example</h3>
        <section>
        <pre>
Podio.Views.Items.BadgeView = Backbone.PodioPaginatedView.extend({
  initialize : function () {
    this.elmPagingNav = $('');
    this.initializePagination();

    _.bindAll(this, 'render');

    this.collection.bind('reset', this.render);
  },

  render : function () {

    var template = $(Podio.Templates['items/badge_list/_list']());

    _(this.collection.models).each(function(model, index) {
      var itemView = new Podio.Views.Items.BadgeViewItem({ model: { item: model, index: index } });
      template.append($(itemView.render().el).children(':first'));
      itemView = null;
    });

    $(this.el).html(template);

    this.elmPagingNav = this.elmPagingNav.appendTo(this.el);
  }
});

</pre>
        </section>
      </article>

      <article>
        <h2>Demo - App views</h2>
      </article>
      <article>
        <h2>Benchmarks</h2>
      </article>

      <article>
        <h2>Testing</h2>
      </article>


      <article>
        <h3>
          Tools
        </h3>

        <table>

          <tr>
            <td>
              Jasmin
            <td>
             Unit testing
          <tr>
            <td>
              Sinon.JS
            <td>
              Mocking
          <tr>
            <td>
              Capybara
            <td>
              Acceptence testing
          <tr>
            <td>
              Evergreen
            <td>
              Test runner for Jenkins/Dev
        </table>
      </article>


      <article>
        <h2>Going forward</h2>
      </article>

      <article>
        <ul>
          <li>Maintainability <br />
            <ul class="smaller">
              <li>Unify Ruby/JavaScript (templating, models)?</li>
              <li>Responsbility of acceptance testing</li>
            </ul>
            <br /></li>


          <li>Performance <br />
            <ul class="smaller">
              <li>Use the API directly?</li>
              <li>Realtime?</li>
              <li>What's the role of Rails? JavaScript?</li>
            </ul>
            <br /></li>

          <li>Future experience <br />
            <ul class="smaller">
              <li>Caching?</li>
              <li>Resume?</li>
            </ul>
          </li>

        </ul>
      </article>


    </section>

  </body>
</html>
